{
  "total_tests": 10,
  "passed": 9,
  "failed": 0,
  "warnings": 1,
  "overall_status": "\u26a0 TESTS PASSED WITH WARNINGS",
  "results": [
    {
      "test_id": "TEST-1",
      "name": "Analyzer Output Structure",
      "result": "\u2713 PASS",
      "details": "  \u2713 account_classification exists\n  \u2713 size_tier = 'LARGE' (valid: ['SMALL', 'MEDIUM', 'LARGE', 'XL', 'NEW'])\n  \u2713 saturation exists\n  \u2713 risk_level = 'MODERATE' (valid: ['LOW', 'MODERATE', 'HIGH', 'CRITICAL', 'HEALTHY', 'LOW_CONFIDENCE'])\n  \u2713 account_classification.avg_audience exists\n  \u2713 account_classification.daily_ppv_target_min exists\n  \u2713 account_classification.daily_ppv_target_max exists\n  \u2713 account_classification.daily_bump_target exists\n  \u2713 account_classification.min_ppv_gap_minutes exists\n  \u2713 account_classification.saturation_tolerance exists\n  \u2713 saturation.saturation_score exists\n  \u2713 saturation.recommended_action exists\n  \u2713 saturation.volume_adjustment_factor exists",
      "recommendations": []
    },
    {
      "test_id": "TEST-2",
      "name": "Selector Caption Targeting",
      "result": "\u2713 PASS",
      "details": "  \u2713 Caption target calculation: 80 (base) * 0.7 (mult) = 56\n  \u2713 Selector target (56) matches expected (56)\n  \u2713 Caption pool size (56) matches target (56)\n  \u2713 Minimum caption floor (30) enforced: 56 >= 30\n  \u2713 Saturation adjustment applied for HIGH: multiplier=0.7",
      "recommendations": []
    },
    {
      "test_id": "TEST-3",
      "name": "Builder Schedule Creation",
      "result": "\u2713 PASS",
      "details": "  \u2713 schedule_id exists: 'SCH_jadebri_20251031_ABC123'\n  \u2713 Schedule has 2 messages\n  \u2713 Would insert 2 rows to schedule_recommendations\n  \u2713 View schedule_recommendations_messages would return rows\n  \u2713 Has 1 captions to lock in active_caption_assignments\n  \u2713 Schedule validation passed: True\n  \u2713 CSV output generated (164 bytes)",
      "recommendations": []
    },
    {
      "test_id": "TEST-4",
      "name": "Exporter Conditional Logic",
      "result": "\u2713 PASS",
      "details": "  \u2713 Valid schedule, GREEN saturation: Export triggered \u2713\n  \u2713 Valid schedule, YELLOW saturation: Export triggered \u2713\n  \u2713 Valid schedule, RED saturation: Export skipped \u2713\n  \u2713 Invalid schedule, GREEN saturation: Export skipped \u2713\n  \u2713 Invalid schedule, RED saturation: Export skipped \u2713\n  \u2713 Exporter reads from view (schedule_recommendations_messages)\n  \u2713 Exporter does NOT write to BigQuery (read-only)",
      "recommendations": []
    },
    {
      "test_id": "TEST-5",
      "name": "Timezone Consistency",
      "result": "\u2713 PASS",
      "details": "  \u2713 Orchestrator declares LA_TZ = 'America/Los_Angeles'\n  \u2713 Timestamp '2025-10-31 09:00:00' in reasonable LA hours (6-23): hour=9\n  \u2713 Timestamp '2025-10-31 14:30:00' in reasonable LA hours (6-23): hour=14\n  \u2713 Timestamp '2025-10-31 20:45:00' in reasonable LA hours (6-23): hour=20\n  \u2713 BigQuery queries use America/Los_Angeles timezone",
      "recommendations": [
        "Verify Python code uses timezone-aware datetimes: datetime.now(pytz.timezone('America/Los_Angeles'))"
      ]
    },
    {
      "test_id": "ADDITIONAL-1",
      "name": "Caption Target Derivation Logic",
      "result": "\u2713 PASS",
      "details": "  \u2713 SMALL/LOW: 60 * 1.0 = 60 (expected 60)\n  \u2713 SMALL/HIGH: 60 * 0.7 = 42 (expected 42)\n  \u2713 MEDIUM/MEDIUM: 80 * 0.85 = 68 (expected 68)\n  \u2713 LARGE/LOW: 100 * 1.0 = 100 (expected 100)\n  \u2713 LARGE/HIGH: 100 * 0.7 = 70 (expected 70)\n  \u2713 XL/MEDIUM: 140 * 0.85 = 119 (expected 119)",
      "recommendations": []
    },
    {
      "test_id": "ADDITIONAL-2",
      "name": "Validation Gate Behavior",
      "result": "\u2713 PASS",
      "details": "  \u2713 validation.ok=False, sat=GREEN: SKIP\n  \u2713 validation.ok=True, sat=RED: SKIP\n  \u2713 validation.ok=True, sat=YELLOW: EXPORT\n  \u2713 validation.ok=True, sat=GREEN: EXPORT",
      "recommendations": []
    },
    {
      "test_id": "ADDITIONAL-3",
      "name": "Schedule ID Propagation",
      "result": "\u2713 PASS",
      "details": "  \u2713 Builder generates schedule_id\n  \u2713 schedule_id in schedule.metadata: 'SCH_jadebri_20251031_XYZ789'\n  \u2713 Orchestrator extracts schedule_id from schedule.metadata\n  \u2713 schedule_id passed to exporter as parameter\n  \u2713 schedule_id used in BigQuery schedule_recommendations insert\n  \u2713 schedule_id available in schedule_recommendations_messages view",
      "recommendations": []
    },
    {
      "test_id": "ADDITIONAL-4",
      "name": "Error Handling & Circuit Breaker",
      "result": "\u2713 PASS",
      "details": "  \u2713 Max retries set to 3\n  \u2713 Circuit breaker threshold set to 5\n  \u2713 Exponential backoff delays: [2, 4, 8]\n  \u2713 Circuit breaker opens after 5 failures: True",
      "recommendations": [
        "Implement proper logging for all exceptions",
        "Add alerting for circuit breaker activations",
        "Monitor retry success rates"
      ]
    },
    {
      "test_id": "ADDITIONAL-5",
      "name": "Orchestrator Logic Flow",
      "result": "\u26a0 WARNING",
      "details": "  \u2713 Workflow executes 6 sequential steps\n  \u2713 caption-selector depends on performance-analyzer\n  \u2713 schedule-builder depends on caption-selector AND performance-analyzer\n  \u2713 sheets-exporter depends on schedule-builder\n  \u2713 Orchestrator supports parallel page processing\n  \u2713 Max parallel tasks = 5",
      "recommendations": [
        "CRITICAL: Python agent files (.py) don't exist - only .md specs",
        "CRITICAL: Import statements will fail (lines 99-109)",
        "CRITICAL: Need to implement all 4 agent classes before orchestrator can run"
      ]
    }
  ]
}